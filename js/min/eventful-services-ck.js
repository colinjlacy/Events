angular.module("eventfulServices",[]).factory("eventfulServices",function(e){return{findEvents:function(){var t=[],n=new Date,s=n.toISOString().slice(0,10),a=n;a.setDate(a.getDate()+30),a=a.toISOString().slice(0,10);var r=["neverUsed","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e({url:"call.php?date_start=2014062000&date_stop=2014071200&page=1",method:"GET"}).success(function(e){for(var n=0;n<e.events.event.length;n++){e.events.event[n].year=e.events.event[n].start_time.substring(0,4);var s=e.events.event[n].start_time.substring(5,7);"0"==s.substr(0,1)&&(s=s.substr(1,1)),e.events.event[n].month=r[s],e.events.event[n].day=e.events.event[n].start_time.substring(8,10),e.events.event[n].description&&(e.events.event[n].description=e.events.event[n].description.replace(/(<([^>]+)>)/gi," ").trim()),t.push(e.events.event[n])}console.log(t)}),t},postToCal:function(t,n,s){var a=encodeURIComponent(t.calendar.id),r=t.start_time.slice(0,10),i=t.stop_time?t.stop_time.slice(0,10):r,o=t.title,v=t.description+" View the event description on Eventful:"+t.url,c=t.venue_name,l=[];if(s)for(var u=0;u<s.length;u++)l.push({email:s[u].email});e({url:"https://www.googleapis.com/calendar/v3/calendars/"+a+"/events?sendNotifications=true&key=185024779579-go9t2i4b44oaffv6as49ijotubekkcql.apps.googleusercontent.com&access_token="+n,method:"POST",data:{start:{date:r},end:{date:i},location:c,summary:o,description:v,attendees:l}})}}});