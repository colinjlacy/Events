angular.module("boomCal").controller("boomControl",function(t,e,n,a,o){t.$on("event:google-plus-signin-success",function(n,s){var i=s.access_token;t.token=i,e.data=a.listEventsOnLoad(i),t.cals=a.listCalendars(i),e.findEvents=o.findEvents()}),t.$on("event:google-plus-signin-failure",function(t,e){console.log("Not signed into Google Plus.")}),t.getEvent=function(e){t.data.activeEvent=e},t.toggleActive=function(e){for(var n=!1,a=0;a<t.cals.active.length;a++)if(t.cals.active[a]==e.id){if(0==a){t.cals.active.shift(),n=!0;break}t.cals.active.splice(a,a),n=!0;break}0==n&&t.cals.active.push(e.id)},t.reviseEvents=function(){var e=t.cals.active,n=t.token;t.data.events=a.reviseEvents(e,n)},t.addEvent=function(){var e=t.data.addEvent,n=t.token;e.calID=encodeURIComponent(e.calID),a.addEvent(e,n)},t.shouldBeChecked=function(e){for(var n=!1,a=0;a<t.cals.active.length;a++)if(t.cals.active[a]==e.id){n=!0;break}return n},t.addToAttendees=function(){t.attendees&&t.attendees.length>0||(t.attendees=[]),t.attendees.push(t.attendee),t.attendee=void 0},t.userLogout=function(){n({url:"https://accounts.google.com/o/oauth2/revoke?token="+t.token,method:"GET",contentType:"application/json",dataType:"jsonp"}).success(function(){location.reload()})};var s=new Date;t.today=function(){t.startDate=s.toISOString().slice(0,10)},t.today(),t.future=function(){var e=s.addDays(30);t.endDate=e.toISOString().slice(0,10)},t.future(),t.toggleMin=function(){t.minDate=t.minDate?null:new Date},t.toggleMin(),t.open=function(e){e.preventDefault(),e.stopPropagation(),t.opened=!0},t.dateOptions={formatYear:"yy",startingDay:1},t.reviseDates=function(){e.startDate=t.startDate,e.endDate=t.endDate;var n=t.token,s=t.startDate,i=t.endDate;console.log(s),console.log(i),t.data=a.listEventsOnLoad(n,s,i),e.findEvents=o.findEvents(s,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[3]});