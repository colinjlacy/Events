angular.module("boomCal").controller("listCtrl",function(e,s,t,d,o){var i=function(t){s({url:"server/retrieve_lists.php",method:"GET",params:{google_id:t}}).success(function(s){e.lists=s,console.log(s),s.owned.length>0&&(e.hasLists=!0)}).error(function(s){e.status=s||"Request Failed"})};i(o.google_id),e.viewList=function(e){o.activeList=e,t.path("lists/"+e.id)},e.deleteList=function(t,d){var i="server/delete_list.php";s({url:i,method:"POST",data:{list_id:t,google_id:o.google_id}}).success(function(s){e.lists.owned.splice(d,1),0==e.lists.owned.length&&(e.hasLists=!1)})},e.add={},e.addItem=function(s){e.add.items||(e.add.items=[]),e.add.items.push(s),e.add.itemToAdd="";var t=document.getElementById("addInput");t.focus()},e.remove=function(s){e.add.items.splice(s,1)},e.save=function(){e.add.google_id=o.google_id;var d=e.add,i="server/create_list.php";s({url:i,method:"POST",data:d}).success(function(s){isNaN(s)?e.add.error=s:(e.add.error=null,d.id=s,e.lists.owned.push(d),e.hasLists=!0,e.add={},t.path("#/lists/"))}).error(function(s){console.log(s),e.add.error=s})}});