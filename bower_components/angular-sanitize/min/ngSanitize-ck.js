"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function(e){return function(n){var t=[];return htmlParser(n,htmlSanitizeWriter(t,function(n,t){return!/^unsafe/.test(e(n,t))})),t.join("")}}]}function sanitizeText(e){var n=[],t=htmlSanitizeWriter(n,angular.noop);return t.chars(e),n.join("")}function makeMap(e){var n={},t=e.split(","),a;for(a=0;a<t.length;a++)n[t[a]]=!0;return n}function htmlParser(e,n){function t(e,t,r,i){if(t=angular.lowercase(t),blockElements[t])for(;l.last()&&inlineElements[l.last()];)a("",l.last());optionalEndTagElements[t]&&l.last()==t&&a("",t),i=voidElements[t]||!!i,i||l.push(t);var s={};r.replace(ATTR_REGEXP,function(e,n,t,a,r){var i=t||a||r||"";s[n]=decodeEntities(i)}),n.start&&n.start(t,s,i)}function a(e,t){var a=0,r;if(t=angular.lowercase(t))for(a=l.length-1;a>=0&&l[a]!=t;a--);if(a>=0){for(r=l.length-1;r>=a;r--)n.end&&n.end(l[r]);l.length=a}}var r,i,s,l=[],o=e,c;for(l.last=function(){return l[l.length-1]};e;){if(c="",i=!0,l.last()&&specialElements[l.last()]?(e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+l.last()+"[^>]*>","i"),function(e,t){return t=t.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),n.chars&&n.chars(decodeEntities(t)),""}),a("",l.last())):(0===e.indexOf("<!--")?(r=e.indexOf("--",4),r>=0&&e.lastIndexOf("-->",r)===r&&(n.comment&&n.comment(e.substring(4,r)),e=e.substring(r+3),i=!1)):DOCTYPE_REGEXP.test(e)?(s=e.match(DOCTYPE_REGEXP),s&&(e=e.replace(s[0],""),i=!1)):BEGING_END_TAGE_REGEXP.test(e)?(s=e.match(END_TAG_REGEXP),s&&(e=e.substring(s[0].length),s[0].replace(END_TAG_REGEXP,a),i=!1)):BEGIN_TAG_REGEXP.test(e)&&(s=e.match(START_TAG_REGEXP),s?(s[4]&&(e=e.substring(s[0].length),s[0].replace(START_TAG_REGEXP,t)),i=!1):(c+="<",e=e.substring(1))),i&&(r=e.indexOf("<"),c+=0>r?e:e.substring(0,r),e=0>r?"":e.substring(r),n.chars&&n.chars(decodeEntities(c)))),e==o)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",e);o=e}a()}function decodeEntities(e){if(!e)return"";var n=spaceRe.exec(e),t=n[1],a=n[3],r=n[2];return r&&(hiddenPre.innerHTML=r.replace(/</g,"&lt;"),r="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),t+r+a}function encodeEntities(e){return e.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(e){var n=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+(1024*(n-55296)+(t-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(e,n){var t=!1,a=angular.bind(e,e.push);return{start:function(e,r,i){e=angular.lowercase(e),!t&&specialElements[e]&&(t=e),t||validElements[e]!==!0||(a("<"),a(e),angular.forEach(r,function(t,r){var i=angular.lowercase(r),s="img"===e&&"src"===i||"background"===i;validAttrs[i]!==!0||uriAttrs[i]===!0&&!n(t,s)||(a(" "),a(r),a('="'),a(encodeEntities(t)),a('"'))}),a(i?"/>":">"))},end:function(e){e=angular.lowercase(e),t||validElements[e]!==!0||(a("</"),a(e),a(">")),e==t&&(t=!1)},chars:function(e){t||a(encodeEntities(e))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap"),validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider);